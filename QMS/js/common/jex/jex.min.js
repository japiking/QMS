/*! 
 * jex javascript library v0.1.13 
 * Copyright 2011, 2015 Webcash. All Rights Reserved. 
 * http://jexframe.com 
 * 
 * Created: 2015-01-27 
 */ 

!function(){"use strict";var a={version:"0.1.13"};window.jexjs=a,window.jj=window.jexjs,a.global={},a.global.debug=!1,a.global.plugins={},a.extend=function(b,c,d,e){if(a.isNull(b)&&(b={}),a.isNull(c))return b;var f=!0;if("boolean"==typeof e&&e===!1&&(f=!1),"object"==typeof c){"boolean"==typeof d&&d===!1&&(f=!1);var g;for(g in c)a.extend(b,g,c[g],f)}else if("string"==typeof c)if(a.isArray(d)||"object"!=typeof d)(f||"undefined"!=typeof b[c])&&(b[c]=d);else{if("undefined"==typeof b[c]){if(!f)return b;b[c]={}}var h;for(h in d)a.extend(b[c],h,d[h],f)}return b},a.clone=function(b){if(a.isArray(b))return b.slice(0);var c={};return a.extend(c,b),c},a.forEach=function(b,c){if(a.isArray(b))for(var d=0;d<b.length;d++){var e=b[d],f=c.apply(e,[d,e]);if("boolean"==typeof f&&!f)break}else a.log("jexjs.forEach : Array 타입만 사용할 수 있습니다. arr : "+typeof b)},a.parseJSON=function(a){return"string"==typeof a?JSON.parse(a):a},a.trim=function(a){return a&&"function"==typeof a.trim?a.trim():a},a.isArray=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"Array"===this.type(a)?!0:!1},a.isJSONExp=function(a){return"string"!=typeof a?!1:/(^{[^}]+})|^\[[^\]]+\]/.test(a)},a.isNull=function(a){return null===a||void 0===a?!0:!1},a.empty=function(b){return null===b||void 0===b||"string"==typeof b&&""===a.trim(b)?!0:!1},a.null2Void=function(b){return a.isNull(b)?"":b},a.type=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},a.error=function(a){throw new Error(a)},a.global._url_parameter={},a.getParameter=function(b){return a.global._url_parameter[b]},a.getParameterMap=function(){return a.global._url_parameter},function(){var b=window.location?window.location.search:"";if(b.indexOf("?")>-1){var c=b.indexOf("?")+1,d=b.indexOf("#");b=d>-1?b.substring(c,d):b.substring(c);for(var e=b.split("&"),f=0;f<e.length;f++){var g,h=e[f].split("="),i=h[0];g=1===h.length?"":h[1],a.global._url_parameter[i]=decodeURIComponent(g)}}}(),function(){var b=a.getParameter("jex_debug");b&&(a.global.debug=!0)}(),a.isDebug=function(){return!!a.global.debug},a.log=function(b){a.logger.log(b)},a.alert=function(a){alert(a)},a.confirm=function(a){return confirm(a)},a.prompt=function(a,b){return prompt(a,b)},a.createAjaxUtil=function(b){return a.plugin("ajax",b)},a.ajaxSetup=function(b){if(!a.isNull(b)){var c=a.global.plugins.ajax;"string"==typeof b.prefix&&(c.prefix=b.prefix,delete b.prefix),"string"==typeof b.suffix&&(c.suffix=b.suffix,delete b.suffix),c.settings=b}},a.addAjaxFilter=function(b){var c=a.global.plugins.ajax;c.filters||(c.filters=[]),"function"==typeof b&&c.filters.push(b)},a.plugin=function(){return a.plugins.require.apply(this,arguments)},a.cookie={},a.cookie.option={expires:1,path:"/"},a.cookie.set=function(b,c,d){var e=new Date;3==arguments.length&&"object"==typeof d&&a.extend(a.cookie.option,d),e.setDate(e.getDate()+a.cookie.option.expires),document.cookie=b+"="+encodeURIComponent(c)+"; path="+a.cookie.option.path+"; expires="+e.toGMTString()+";"},a.cookie.get=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(-1!=e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}return""},a.cookie.remove=function(b){a.cookie.set(b,"",{expires:-1})},a.getRoot=function(b,c){return a.isNull(b)&&(b=a.isNull(opener)?parent:opener,c=window),b.jexjs?b===c?c:a.getRoot(b.parent,b):c},a.getOpener=function(){return a.isNull(opener)?parent:opener},a.$=jQuery,function(){console||(console={}),"undefined"==typeof console.log&&(console.log=function(){});var b={log:function(b){a.isDebug()&&console.log(b)}},c=function(){function b(b){b="jexjs : "+b,a.$('<li class="'+f+'">'+b+"</li>").appendTo(k)}var c="jex-logger",d="jex-logger-badge",e="jex-logger-console",f="jex-logger-console-line",g="jex-display-none",h=a.$("#"+c);if(0===h.length){var i='<div id="'+c+'"><div class="'+d+'"></div><div class="'+e+" "+g+'"><ul></ul></div></div>';h=a.$(i).appendTo("body")}var j=h.find("."+e),k=j.find("ul");return h.find("."+d).on("click",function(){"none"===j.css("display")?j.removeClass("jex-display-none"):j.addClass("jex-display-none")}),{log:function(c){a.isDebug()&&b(c)}}};a.logger="html"!==a.getParameter("jex_logger")?b:new c}(),a.log("  [init] loading jexjs modules"),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return new RegExp("^"+a).test(this)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return new RegExp(a+"$").test(this)}),Date.prototype.format=function(a){if("string"!=typeof a)return a;var b=null,c=null,d=null,e=null,f=null,g=null,h=null;return(/yyyy/.test(a)||/YYYY/.test(a))&&(b=this.getFullYear(),a=a.replace(/yyyy/g,b),a=a.replace(/YYYY/g,b)),(/yy/.test(a)||/YY/.test(a))&&(b=(this.getFullYear()+"").substring(2),a=a.replace(/yy/g,b),a=a.replace(/YY/g,b)),(/y/.test(a)||/Y/.test(a))&&(b=parseInt((this.getFullYear()+"").substring(2),10),a=a.replace(/y/g,b),a=a.replace(/Y/g,b)),/MM/.test(a)&&(c=this.getMonth()+1,10>c&&(c="0"+c),a=a.replace(/MM/g,c)),/M/.test(a)&&(c=this.getMonth()+1,a=a.replace(/M/g,c)),/dd/.test(a)&&(d=this.getDate(),10>d&&(d="0"+d),a=a.replace(/dd/g,d)),/d/.test(a)&&(d=this.getDate(),a=a.replace(/d/g,d)),/HH/.test(a)&&(e=this.getHours(),10>e&&(e="0"+e),a=a.replace(/HH/g,e)),/H/.test(a)&&(e=this.getHours(),a=a.replace(/H/g,e)),/hh/.test(a)&&(e=this.getHours(),e>12&&(e-=12),10>e&&(e="0"+e),a=a.replace(/hh/g,e)),/h/.test(a)&&(e=this.getHours(),e>12&&(e-=12),a=a.replace(/h/g,e)),/mm/.test(a)&&(f=this.getMinutes(),10>f&&(f="0"+f),a=a.replace(/mm/g,f)),/m/.test(a)&&(f=this.getMinutes(),a=a.replace(/m/g,f)),/ss/.test(a)&&(g=this.getSeconds(),10>g&&(g="0"+g),a=a.replace(/ss/g,g)),/s/.test(a)&&(g=this.getSeconds(),a=a.replace(/s/g,g)),(/aa/.test(a)||/AA/.test(a))&&(h=this.getHours()<12?"오전":"오후",a=a.replace(/aa/g,h),a=a.replace(/AA/g,h)),/A/.test(a)&&(h=this.getHours()<12?"AM":"PM",a=a.replace(/A/g,h)),/a/.test(a)&&(h=this.getHours()<12?"am":"pm",a=a.replace(/a/g,h)),a},Date.format=function(a,b){return b instanceof Date?void b.format(a):(new Date).format(a)},a.plugins={_plugins:{},define:function(b,c,d){var e,f;a.global.plugins[b]={},a.isArray(c)?(e=c,f=d):f=c,a.global.plugins[b].dependencies=a.clone(e)||[],a.plugins._plugins[b]=f,a.log("  [plugin] define '"+b+"'")},require:function(b){var c=Array.prototype.slice.call(arguments,1),d=a.plugins._plugins[b];a.isNull(d)&&a.error("jexjs.plugins."+b+" is not defined.");for(var e=a.global.plugins[b].dependencies,f=[],g=0;g<e.length;g++){var h=new a.plugins._plugins[e[g]];f.push(h)}var i=Object.create(d.prototype),j=d.apply(i,f);return"function"==typeof j.init&&j.init.apply(this,c),j}},a.plugins.define("layout",function(){var a={};return{init:function(){},add:function(b,c){a[b]=c},get:function(b){return a[b]}}}),a.plugins.define("ajax",["indicator"],function(b){function c(c){b.hide();var e=c;"string"==typeof e&&a.isJSONExp(e)&&(e=a.parseJSON(e)),a.log("  jexjs.plugin.ajax : "+m.url+" 호출 성공");for(var f=!0,h=0,i=l.length;i>h;h++){a.log("    jexjs.plugin.ajax : "+(h+1)+" filter start"),f=!1;var j=l[h](e);if(!j){a.log("    jexjs.plugin.ajax : "+(h+1)+" filter failed"),a.log(c);break}h===i-1&&(a.log("    jexjs.plugin.ajax : all filter passed."),f=!0)}f?"function"==typeof g.success&&g.success(e):d(e)}function d(c){a.log("  jexjs.plugin.ajax [error] : 호출 실패! "+m.url),b.hide(),"function"==typeof g.error&&g.error(c)}function e(){m.success=c,m.error=d,m.url=j+i+k,b.show(),o.execute(m,f)}var f={},g={success:null,error:null},h=a.global.plugins.ajax,i="",j=h.prefix||"",k=h.suffix||"",l=h.filters||[],m={type:"POST",url:"",data:{},cache:!1,headers:{"cache-control":"no-cache",pragma:"no-cache"}};a.extend(m,h.settings);var n={execute:function(a,b){a.data={_JSON_:encodeURIComponent(JSON.stringify(b))},jQuery.ajax(a)}},o=n,p=function(a){return a&&a.COMMON_HEAD?!a.COMMON_HEAD.ERROR:!0};return a.addAjaxFilter(p),{init:function(a){i=a},set:function(b,c){a.extend(f,b,c)},get:function(a){return f[a]},setting:function(a,b){if(1===arguments.length&&"string"==typeof a)return"prefix"===a?j:"suffix"===a?k:"url"===a?i:m[a];if("object"==typeof a)for(var c in a)this._setting(c,a[c]);else"string"==typeof a&&this._setting(a,b)},_setting:function(b,c){"url"===b?i=c:"prefix"===b?j=c:"suffix"===b?k=c:a.extend(m,b,c)},callback:function(b,c){a.extend(g,b,c)},executor:function(b){"function"==typeof b.execute?o=b:a.error("jexjs.plugin.ajax.executor must implements execute function")},execute:function(a){"function"==typeof a?this.callback("success",a):"object"==typeof a&&("function"==typeof a.success&&this.callback("success",a.success),"function"==typeof a.error&&this.callback("error",a.error)),e()}}}),a.plugins.define("code_manager",function(){function b(b){return c[b]?c[b]:(jQuery.ajax({url:d,type:"GET",async:!1,cache:!1,processData:!1,contentType:!1,success:function(b){"string"==typeof b&&a.isJSONExp(b)&&(b=a.parseJSON(b)),b&&a.extend(c,b)},error:function(){a.log("  jexjs.plugins.code_manager : 서버로부터 code를 가져오는데 실패하였습니다.")}}),c[b]?c[b]:"")}a.global.plugins.code_manager.cached||(a.global.plugins.code_manager.cached={});var c=a.global.plugins.code_manager.cached,d="/code.json";return{init:function(){},get:function(a){return b(a)},url:function(a){d=a}}});var b=a.plugin("layout");b.add("_DEF_DIALOG_LAYOUT","<div class='jex_dialog'><div class='jex_dialog_header'><h1 class='jex_dialog_title'></h1><a title='닫기' class='jex_dialog_btn_close'><img src='' alt='close'/></a></div><div class='jex_dialog_containner'><iframe src=''></iframe></div></div>"),a.plugins.define("dialog",function(){var d,e={id:void 0,dialogClass:"jex_dialog",closeClass:"jex_dialog_btn_close",titleClass:"jex_dialog_title",headerClass:"jex_dialog_header",title:"타이틀명",width:800,height:600,layout:void 0,zIndex:1e3,modalZIndex:999,modalOpacity:30,positionX:0,positionY:0,show:!1,modal:!0,url:void 0,closable:!0,reloadable:!0,onClose:function(){}},f={init:function(b){f.setOption(b),a.isNull(e.id),d=a.$("#"+e.id),0<d.length&&(d.remove(),a.$("#dialogBackground").remove());var c=f.setLayout();d=c,f.setLayoutStyle(c),f.setModal(),f.setLayoutEvent()},reset:function(){f.setLayoutStyle(d),f.setModal(),f.setLayoutEvent()},setLayout:function(){var b=a.$(e.layout);return b.attr("id",e.id),b.appendTo("body"),b.css("display","none"),b},setLayoutStyle:function(b){var c=f.getPosition();b.css({position:"absolute",width:e.width+"px",height:e.height+"px","z-index":e.zIndex,top:c.top+"px",left:c.left+"px"}),a.isNull(a.$("."+e.titleClass))||b.find("."+e.titleClass).html(e.title),b.find("iframe").attr("src",e.url)},setModal:function(){if(e.modal){var b=e.modalOpacity/100;if(0===a.$("#dialogBackground").length){var c=$("<div id='dialogBackground' class='jex_dialog_modal'></div>");c.css({"z-index":e.modalZIndex,display:"none",opacity:b,FILTER:"filter:alpha(opacity="+e.modalOpacity+")","-khtml-opacity":b,"-moz-opacity":b}),c.appendTo("body")}else a.$("#dialogBackground").css({"z-index":e.modalZIndex,opacity:b,FILTER:"filter:alpha(opacity="+e.modalOpacity+")","-khtml-opacity":b,"-moz-opacity":b})}},setLayoutEvent:function(){d.find("."+e.closeClass).unbind("click"),d.find("."+e.closeClass).click(function(){f.hide()}),d.find("."+e.headerClass).unbind("dblclick"),e.closable&&d.find("."+e.headerClass).dblclick(function(){f.hide()})},getOption:function(){return e},setOption:function(c){if(!a.isNull(c)){for(var d in c)"id"===d||"layout"==d?e[d]||(e[d]=c[d]):e[d]=c[d];e.layout||(e.layout=b.get("_DEF_DIALOG_LAYOUT"))}},getPosition:function(){var a=new c(e),b={};return b.left=e.positionX,b.top=e.positionY,"string"==typeof e.positionX&&"CENTER"==e.positionX.toUpperCase()&&(b.left=a.getCenterLeft()),"string"==typeof e.positionY&&"CENTER"==e.positionY.toUpperCase()&&(b.top=a.getCenterTop()),b},resetPosition:function(){var b=f.getPosition();a.$("#"+e.id).css({top:b.top,left:b.left})},showBackground:function(){$("#dialogBackground").show()},hideBackground:function(){$("#dialogBackground").hide()},show:function(){f.resetPosition(),e.modal&&f.showBackground(),d.show(),e.reloadable&&d.find("iframe").attr("src",d.find("iframe").attr("src"))},hide:function(a){jj.isNull(a)||jj.isNull(a.callback)||"function"!=typeof a.callback?jj.isNull(e.onClose)||"function"!=typeof e.onClose||e.onClose():a.callback(),e.modal&&f.hideBackground(),d.hide()},isOpen:function(){return 0<d.length&&"none"!=d.css("display")?!0:!1}};return{init:function(a){f.init(a)},reset:function(){f.reset()},setOption:function(a){f.setOption(a)},getOption:function(){return f.getOption()},show:function(a){f.show(a)},hide:function(a){f.hide(a)},isOpen:function(){return f.isOpen()},getWindow:function(){return d.find("iframe").get(0).contentWindow||d.find("iframe").get(0).contentDocument}}});var c=function(a){this.option=a,this.init()};c.prototype.init=function(){},c.prototype.getCenterPosition=function(){var a=this.getCenterTop(),b=this.getCenterLeft(),c={left:b,top:a};return c},c.prototype.getCenterTop=function(){var a=$(window).height()/2,b=this.option.height/2,c=a-b+$(window).scrollTop();return c},c.prototype.getCenterLeft=function(){var a=$(window).width()/2,b=this.option.width/2,c=a-b+$(window).scrollLeft();return c},a.plugins.define("dom",function(){function b(b,c){var d=a.$("#"+b);if(0!==d.length&&c){var e=d.find('[name="'+c+'"]');if(0!==e.length){var f,g=e[0].tagName.toLowerCase();if("input"===g){var h=e.attr("type").toLowerCase();return"checkbox"===h?(f=[],d.find('[name="'+c+'"]:checked').each(function(){f.push(a.$(this).val())}),f):"radio"===h?a.null2Void(d.find('[name="'+c+'"]:checked').val()):e.val()}return"select"===g?a.null2Void(e.val()):"textarea"===g?e.val():void 0}}}function c(c){var d={};return a.$("#"+c).find("[name]").each(function(){var e=a.$(this).attr("name");return e?void("undefined"==typeof d[e]&&(d[e]=a.null2Void(b(c,e)))):!0}),d}function d(b,c,e){var f=a.$("#"+b);if(0!==f.length&&c){var g=f.find('[name="'+c+'"]');if(0!==g.length){var h=g[0].tagName.toLowerCase();if("input"===h){var i=g.attr("type");if("checkbox"===i){if("string"==typeof e)if(""===e.trim())g.each(function(){a.$(this)[0].checked=!1});else{var j=f.find('[name="'+c+'"][value="'+e+'"]')[0];j&&(j.checked=!0)}else if(a.isArray(e))for(var k=0;k<e.length;k++)d(b,c,e[k])}else if("radio"===i)if(""===e.trim())g.each(function(){a.$(this)[0].checked=!1});else{var l=f.find('[name="'+c+'"][value="'+e+'"]')[0];l&&(l.checked=!0)}else g.val(e)}else"select"===h?g.val(e):"textarea"===h&&g.val(e)}}}function e(a,b){for(var c in b)d(a,c,b[c])}function f(a,b){d(a,b,"")}function g(b){a.$("#"+b).find("[name]").each(function(){f(b,a.$(this).attr("name"))})}return{init:function(){},get:function(a,c){return b(a,c)},set:function(a,b,c){d(a,b,c)},getAll:function(a){return c(a)},setAll:function(a,b){e(a,b)},clear:function(a,b){f(a,b)},clearAll:function(a){g(a)}}}),a.plugins.define("file_upload",function(){function b(a){c(),g=a,h.attr({action:a,target:i.attr("name")})}function c(){var b=(new Date).getTime();h=a.$("#"+k+"_"+b),0===h.length&&(h=a.$(l),h.appendTo("body")),0===h.find("input[type=submit]").length&&h.append(a.$(o)),h.off("submit").on("submit",function(){var b=new FormData,c=$(a.$(this).find("input[type=file]")[0]);return b.append(c.attr("name"),c[0].files[0]),jQuery.ajax({url:g,type:"POST",data:b,async:!1,cache:!1,processData:!1,contentType:!1,success:function(a){"function"==typeof j&&j(a)},error:function(){console.log("error")}}),!1}),i=a.$(m),i.attr("name","jex_fileupload_frame"),i.appendTo("body")}function d(b,c){var d=h.find("input[name="+b+"]")[0];"undefined"==typeof d?(d=a.$(n).attr({id:b,name:b}),h.append(d),d.on("change",function(){"function"==typeof c&&c(d.val())})):d=a.$(d),d.click()}function e(a){j=a,h.find("input[type=submit]").click()}function f(a){g=a,h.attr("action",a)}var g,h,i,j,k="jex_file_upload_form",l=((new Date).getTime(),'<form method="post" enctype="multipart/form-data" style="position:absolute; top: -1000px; left: -1000px;"></form>'),m='<iframe style="display:none;"></iframe>',n='<input type="file" />',o='<input type="submit" value="upload" />';return{init:function(a){b(a)},add:function(a,b){d(a,b)},upload:function(a){e(a)},url:function(a){f(a)}}}),a.plugins.define("formatter",function(){function b(a,b){var c=0,d="",e=0,f=Number(a);if(0===f)for(c=null===b.match(/0/g)?1:b.match(/0/g).length,e=0;c>e;e++)d=d.concat("0");else{if(a.length<b.length){for(e=0;e<b.length-a.length;e++)"0"==b.charAt(e)&&c++;for(e=0;c>e;e++)d=d.concat("0")}d=d.concat(a)}return d}function c(a,b){var c,d=Number(a[0]+"."+a[1]),e="",f=(a[0],a[1]),g=[],h=0;if(1==b.length&&2==a.length)g[0]=d.toFixed(0);else if(2==b.length&&1==a.length)d=Number(a[0]),h=null===b[1].match(/0/g)?0:b[1].match(/0/g).length,e=String(d.toFixed(h)),g=e.split(".");else if(2==b.length&&2==a.length)if(a[1].length>b[1].length){h=b[1].length,e=String(d.toFixed(h));var i=e.split(".");f=i[1];var j=0;for(c=f.length;c>0&&"0"==f.charAt(c-1);c--)"#"==b[1].charAt(c-1)&&j++;e=String(d.toFixed(h-j)),g=e.split(".")}else{for(c=a[1].length;c<b[1].length;c++)"0"==b[1].charAt(c)&&h++;d=String(d.toFixed(a[1].length+h)),g=d.split(".")}return g}var d={CARD:/([0-9]{4})([0-9]{4})([0-9]{4})([0-9]{4})/,RRN:/([1-9]{1}[0-9]{5})([1-4]{1}[0-9]{6})/,BRN:/([0-9]{3})([0-9]{2})([0-9]{5})/,ZIPCODE:/([0-9]{3})([0-9]{3})/,PHONE:/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/},e={number:function(d,e){var f=d,g="";if(!f)return d;if("string"!=typeof e)return void a.error("format parameter is not a string.");"number"==typeof f&&(f=String(f)),new RegExp(/[^-+.\d]/g).test(f)&&(f=f.replace(/[^-+.\d]/g,""));try{f=Number(f)}catch(h){return d}var i=[];if(i=e.split("."),2<i.length)return d;var j=[];return f=String(f),j=f.split("."),(1!=j.length||1!=i.length)&&(j=c(j,i)),g=b(j[0],i[0]),1==j.length?f=g:(j[0]=g,f=j[0]+"."+j[1]),f},money:function(a,b){for(var c=e.number(a,b),d=/(^[+-]?\d+)(\d{3})/;d.test(c);)c=c.replace(d,"$1,$2");return c},card:function(a){var b=a;return b?("number"==typeof b&&(b=String(b)),new RegExp(/[^0-9]/g).test(b)&&(b=b.replace(/[^0-9]/g,"")),16==b.length?b.replace(d.CARD,"$1-$2-$3-$4"):a):a},cardMask:function(a){var b=a;return b?("number"==typeof b&&(b=String(b)),new RegExp(/[^0-9]/g).test(b)&&(b=b.replace(/[^0-9]/g,"")),16==b.length?b.replace(d.CARD,"$1-****-****-$4"):a):a},rrnBrn:function(a){var b=a;return b?("number"==typeof b&&(b=String(b)),new RegExp(/[^0-9]/g).test(b)&&(b=b.replace(/[^0-9]/g,"")),13==b.length?b.replace(d.RRN,"$1-$2"):10==b.length?b.replace(d.BRN,"$1-$2-$3"):a):a},rrnBrnMask:function(a){var b=a;return b?("number"==typeof b&&(b=String(b)),new RegExp(/[^0-9]/g).test(b)&&(b=b.replace(/[^0-9]/g,"")),13==b.length?b.replace(d.RRN,"$1-*******"):10==b.length?b.replace(d.BRN,"$1-$2-*****"):a):a},zipcode:function(a){var b=a;return b?("number"==typeof b&&(b=String(b)),new RegExp(/[^0-9]/g).test(b)&&(b=b.replace(/[^0-9]/g,"")),6==b.length?b.replace(d.ZIPCODE,"$1-$2"):a):a},account:function(a,b){var c=a,d="",e=0;if(!c||!b||"object"!=typeof b)return a;"number"==typeof c&&(c=String(c)),new RegExp(/[^0-9]/g).test(c)&&(c=c.replace(/[^0-9]/g,""));for(var f=0;f<b.length;f++)e+=b[f];if(c.length!=e)return a;var g=0;for(f=0;f<b.length;f++)f>0&&(d=d.concat("-")),d+=c.substr(g,b[f]),g+=b[f];return d},accountMask:function(a,b){var c=a,d="",e=0;if(!c||!b||"object"!=typeof b)return a;"number"==typeof c&&(c=String(c)),new RegExp(/[^0-9]/g).test(c)&&(c=c.replace(/[^0-9]/g,""));for(var f=0;f<b.length;f++)e+=b[f];if(c.length!=e)return a;var g=0;for(f=0;f<b.length-1;f++)f>0&&(d=d.concat("-")),d+=c.substr(g,b[f]),g+=b[f];for(d=d.concat("-"),f=0;f<c.length-g;f++)d=d.concat("*");return d},phone:function(a){var b=a;return b?("number"==typeof b&&(b=String(b)),new RegExp(/[^0-9]/g).test(b)&&(b=b.replace(/[^0-9]/g,"")),b.replace(d.PHONE,"$1-$2-$3")):a},phoneMask:function(a){var b=a;return b?("number"==typeof b&&(b=String(b)),new RegExp(/[^0-9]/g).test(b)&&(b=b.replace(/[^0-9]/g,"")),b.replace(d.PHONE,"$1-$2-****")):a}};return{init:function(){},set:function(b,c){"function"!=typeof c?a.error(c+" is not a function"):this[b]=c},add:function(b,c){if("function"!=typeof c)a.error(c+" is not a function.");else{for(var d in e)if(b==d)return void a.error("duplicate function error.");this[b]=c}},getFormatExps:function(){return d},number:function(a,b){return e.number(a,b)},money:function(a,b){return e.money(a,b)},card:function(a){return e.card(a)},cardMask:function(a){return e.cardMask(a)},rrnBrn:function(a){return e.rrnBrn(a)},rrnBrnMask:function(a){return e.rrnBrnMask(a)},zipcode:function(a){return e.zipcode(a)},account:function(a,b){return e.account(a,b)},accountMask:function(a,b){return e.accountMask(a,b)},phone:function(a){return e.phone(a)},phoneMask:function(a){return e.phoneMask(a)}}}),a.plugins.define("indicator",function(){function b(b){var c=b.document.getElementById(f);if(a.isNull(c)){a.log("  jexjs.plugins.indicator : init indicator element");var i='<div id="'+f+'"><div class="'+g+'"><span class="'+h+'"></span></div></div>';e=a.$(i),d(),a.$(b.document.body).append(e)}else a.log("  jexjs.plugins.indicator : using created indicator element"),e=a.$(c)}function c(){e.removeClass("jex-display-none")}function d(){e.addClass("jex-display-none")}var e,f="jex-indicator",g="jex-indicator-bg",h="jex-indicator-img";return b(a.getRoot()||window),{show:function(){c()},hide:function(){d()}}}),a.plugins.define("tab",function(){function b(b){if(a.extend(g,b),!a.isNull(g.id)){f=$("#"+g.id);var c=$(g.tabLayout);if(0===f.find("."+g.headerClass).length&&c.addClass(g.headerClass),f.prepend(c),"iframe"==g.type){var d=$(g.tabBodyLayout);0===f.find("."+g.bodyClass).length&&d.addClass(g.bodyClass),f.append(d)}}}function c(b){var c=!1;if(0===f.find("."+g.tabClass).length&&(c=!0),0===f.find("#"+b.id).length){var e=a.$(g.tabContsLayout);if(e.attr("id",b.id),e.addClass(g.tabClass),e.html(b.name),f.find("."+g.headerClass).append(e),"iframe"==g.type){var h=a.$(g.tabBodyContsLayout);h.attr("id","body_"+b.id),h.css({display:"none"}),f.find("."+g.bodyClass).append(h),f.find("#body_"+b.id).find("iframe").attr("src",b.url)}c&&d({id:b.id}),f.find("#"+b.id).click(function(){"function"==typeof b.fn?b.fn():d({id:a.$(this).attr("id")})})}}function d(a){0!==f.find("#"+a.id).length&&(f.find("."+g.headerClass).children().removeClass(g.selectClass),f.find("#"+a.id).addClass(g.selectClass),f.find("."+g.bodyClass).children().hide(),f.find("#body_"+a.id).show())}function e(a){0<f.find("#"+a.id).length&&f.find("#"+a.id).remove(),0<f.find("#body_"+a.id).length&&f.find("#body_"+a.id).remove()}var f,g={id:void 0,type:"iframe",headerClass:"jex_tabheader",tabClass:"jex_tabheader_item",bodyClass:"jex_tabbody",selectClass:"jex_tab_select",selectFn:function(){},tabLayout:"<ul></ul>",tabContsLayout:"<li></li>",tabBodyLayout:"<div></div>",tabBodyContsLayout:"<div><iframe></iframe></div>"};return{init:function(a){b(a)},add:function(a){c(a)},select:function(a){d(a)},remove:function(a){e(a)},getWindow:function(a){return"iframe"==g.type?f.find("#body_"+a.id).find("iframe").get(0).contentWindow:window}}}),a.plugins.define("template",function(){function b(b,c){var d="",e=0,f="#{",g="}";return function(){for(var h,i;-1!=(h=b.indexOf(f,e));){i=b.indexOf(g,h),-1===i&&a.error("  template] render error : can not found '}' "),d+=b.substring(e,h);var j=b.substring(h+f.length,i+g.length-1),k=new Function("localScope","return localScope."+j);d+=k(c),e=i+1}d+=b.substring(e)}(),d}return{init:function(){},render:function(a,c){var d=this,e=d.get(a)||a;return b(e,c)},add:function(b,c){a.global.plugins.template._list[b]=c},get:function(b){return a.global.plugins.template._list[b]},_registerFromDom:function(){var a,b=this,c=document.getElementsByTagName("jex-template"),d=document.getElementsByTagName("script"),e=c.length;for(a=0;e>a;a++){var f=c[a],g=f.getAttribute("id"),h=f.innerHTML.trim();b.add(g,h)}for(e=d.length,a=0;e>a;a++){var i=d[a],j=i.getAttribute("id"),k=i.getAttribute("type"),l=i.innerHTML.trim();j&&"text/jex-template"===k&&b.add(j,l)}}}}),a.global.plugins.template._list={},$(document).ready(function(){a.plugin("template")._registerFromDom()}),a.plugins.define("tree",["template"],function(b){function c(){e._$node.addClass(g.root)}function d(b,c){a.isArray(h[b])&&"function"==typeof c&&h[b].push(c)}var e,f={mode:"unfold"},g={root:"jex_tree",node:"jex_tree_node",sub_nodes:"jex_tree_sub_nodes",fold:"jex_tree_node_fold"},h={select:[],fold:[],unfold:[]},i='<div class="'+g.sub_nodes+'"></div>',j='<div class="'+g.node+'">#{ title } '+i+"</div>",k=function(c,d){var e=this;if(this._data=c,d)this._$node=d;else{var i=b.render(j,c);this._$node=a.$(i)}if(this._$subNodes=this._$node.find("."+g.sub_nodes),this.sub_nodes=[],"fold"===f.mode&&e.fold(!0),a.isArray(c.sub_nodes))for(var k=0;k<c.sub_nodes.length;k++)e.append(c.sub_nodes[k]);this._$node.on("click",function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;for(var b=0;b<h.select.length;b++){var c=h.select[b];c(e._data,e)}e.toggleFold()})};return k.prototype.append=function(b){var c,d=this;if(b instanceof k){d.sub_nodes.push(b);var e=this._$subNodes.length>0?this._$subNodes:this._$node;e.append(b._$node)}else if(a.isArray(b))for(var f=0;f<b.length;f++)c=this.append(b[f]);else c=new k(b),this.append(c);return c},k.prototype.get=function(a){return"number"==typeof a&&a<this.sub_nodes.length?this.sub_nodes[a]:void 0},k.prototype.count=function(){for(var a=0,b=0;b<this.sub_nodes.length;b++){a+=1;var c=this.sub_nodes[b];a+=c.count()}return a},k.prototype.fold=function(a){if(!a||!this.isFold()){for(var b=this,c=0;c<h.fold.length;c++){var d=h.fold[c];d(b._data,b)}this._$subNodes.addClass(g.fold)}},k.prototype.unFold=function(){if(this.isFold()){for(var a=this,b=0;b<h.unfold.length;b++){var c=h.unfold[b];c(a._data,a)}this._$subNodes.removeClass(g.fold)}},k.prototype.toggleFold=function(){this.isFold()?this.unFold():this.fold()},k.prototype.isFold=function(){return this._$subNodes.hasClass(g.fold)},{init:function(b,d){var g=a.$("#"+b);if((0===g.length||g.length>1)&&a.error("  jexjs.plugins.tree : init error : check your tree root element id [ "+b+" ]"),d){var h=d.mode;("unfold"===h||"fold"===h)&&(f.mode=h)}e=new k({},g),c()},append:function(a){return e.append(a)},get:function(a){return e.get(a)},count:function(){return e.count()},on:function(a,b){d(a,b)}}}),a.plugins.define("validator",function(){function b(b,e){var f=e?c:d;a.log(e?' [ validator ] : run "rules"':' [ validator ] : run "liveRules"');var g={error:!1};return b.find("[data-valid]").each(function(){var b=$(this),c=b.attr("name"),d=b.attr("data-valid").split(";");a.forEach(d,function(d,e){var h=a.trim(e);if(a.empty(h))return!0;var i=h.split("="),j=a.trim(i[0]),k=a.trim(i[1]);a.log(" [ validator ] : fieldName : { "+c+" }, rule : { "+j+" }");var l=f[j];if("function"!=typeof l)return!0;a.log(" [ validator ] :   check validate");var m={error:!0,message:"",fieldName:c,rule:j};return l.apply(m,[b,k]),m.error?(g.error=!0,g[c]=m,!1):void 0})}),e?g:void 0}a.global.plugins.validator.rules=a.global.plugins.validator.rules||{},a.global.plugins.validator.liveRules=a.global.plugins.validator.liveRules||{};var c=a.global.plugins.validator.rules,d=a.global.plugins.validator.liveRules;return{addRule:function(a,b){c[a]=b},addLiveRule:function(a,b){d[a]=b},listen:function(a){b(a,!1)},validate:function(a){return b(a,!0)},rules:c,liveRules:d}}),function(){a.plugin("validator")}()}();